<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>3 A primer on Webscraping | Data Harvesting with R</title>
<meta name="author" content="Jorge Cimentada">
<meta name="description" content="Webscraping is the subtle art of being a ninja. You need not be an expert on many things but should have a swiss army knife of skills when it comes to data cleaning and data manipulation. String...">
<meta name="generator" content="bookdown 0.26 with bs4_book()">
<meta property="og:title" content="3 A primer on Webscraping | Data Harvesting with R">
<meta property="og:type" content="book">
<meta property="og:url" content="https://cimentadaj.github.io/dataharvesting/a-primer-on-webscraping.html">
<meta property="og:description" content="Webscraping is the subtle art of being a ninja. You need not be an expert on many things but should have a swiss army knife of skills when it comes to data cleaning and data manipulation. String...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="3 A primer on Webscraping | Data Harvesting with R">
<meta name="twitter:description" content="Webscraping is the subtle art of being a ninja. You need not be an expert on many things but should have a swiss army knife of skills when it comes to data cleaning and data manipulation. String...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/_Lato-0.4.1/font.css" rel="stylesheet">
<link href="libs/_Roboto%20Mono-0.4.1/font.css" rel="stylesheet">
<link href="libs/_Montserrat-0.4.1/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
<script>
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  
   ga('create', 'UA-99618359-1', 'auto');
   ga('send', 'pageview');
  
  </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="style/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h2>
        <a href="index.html" title="">Data Harvesting with R</a>
      </h2>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Welcome</a></li>
<li><a class="" href="introduction-to-webscraping.html"><span class="header-section-number">2</span> Introduction to Webscraping</a></li>
<li><a class="active" href="a-primer-on-webscraping.html"><span class="header-section-number">3</span> A primer on Webscraping</a></li>
<li><a class="" href="data-formats-for-webscraping.html"><span class="header-section-number">4</span> Data Formats for Webscraping</a></li>
<li><a class="" href="what-they-never-taught-you-about-regular-expressions.html"><span class="header-section-number">5</span> What they never taught you about regular expressions</a></li>
<li><a class="" href="what-you-need-to-know-about-xpath.html"><span class="header-section-number">6</span> What you need to know about XPath</a></li>
<li><a class="" href="case-study-scraping-spanish-school-locations-from-the-web.html"><span class="header-section-number">7</span> Case study: scraping Spanish school locations from the web</a></li>
<li><a class="" href="automating-web-scraping-scripts.html"><span class="header-section-number">8</span> Automating Web scraping scripts</a></li>
<li><a class="" href="scraping-javascript-based-website.html"><span class="header-section-number">9</span> Scraping JavaScript based website</a></li>
<li><a class="" href="ethical-issues-in-web-scraping.html"><span class="header-section-number">10</span> Ethical issues in Web Scraping</a></li>
<li><a class="" href="introduction-to-rest-apis.html"><span class="header-section-number">11</span> Introduction to REST APIs</a></li>
<li><a class="" href="introduction-to-json.html"><span class="header-section-number">12</span> Introduction to JSON</a></li>
<li><a class="" href="a-primer-on-apis.html"><span class="header-section-number">13</span> A primer on APIs</a></li>
<li><a class="" href="what-is-a-restful-api.html"><span class="header-section-number">14</span> What is a RESTful API?</a></li>
<li><a class="" href="authentication-in-apis.html"><span class="header-section-number">15</span> Authentication in APIs</a></li>
<li><a class="" href="case-study-grabbing-data-from-a-public-api.html"><span class="header-section-number">16</span> Case Study: grabbing data from a public API</a></li>
<li><a class="" href="why-automation-is-important.html"><span class="header-section-number">17</span> Why automation is important</a></li>
<li><a class="" href="automating-data-collectiong-programs.html"><span class="header-section-number">18</span> Automating data collectiong programs</a></li>
<li><a class="" href="insightful-and-robust-data-collection-progams.html"><span class="header-section-number">19</span> Insightful and robust data collection progams</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/cimentadaj/dataharvesting/tree/main/book">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="a-primer-on-webscraping" class="section level1">
<h1>
<span class="header-section-number">3</span> A primer on Webscraping<a class="anchor" aria-label="anchor" href="#a-primer-on-webscraping"><i class="fas fa-link"></i></a>
</h1>
<p>Webscraping is the subtle art of being a ninja. You need not be an expert on many things but should have a swiss army knife of skills when it comes to data cleaning and data manipulation. String manipulations, data subsetting and clever tricks rather than exact solutions will be your companion on your day to day scraping needs. Throughout this chapter I’ll give you a one-to-one tour on what to expect when webscraping out in the wild. For that reason, this book will skip the usual ‘start from the basics’ sections to directly webscrape a website and see results from your efforts right away. Ready? Let’s get going then.</p>
<p>The aim of this primer is to create a plot like this one:</p>
<div class="inline-figure"><img src="images/primer_webscraping/elections_plot.png" width="100%" style="display: block; margin: auto;"></div>
<p>This plot shows the election results for all political parties in Spain since 1978. We do not have data on this on your local computer so we’ll need to find this online and scrape it. By scrape I specifically mean to write down a little R script that will go to a website for you and manually select the data points that you tell it to. Wikipedia has such data but throughout this book we will work mostly with local copies of websites as outlined in the # TODO introduction chapter.</p>
<div id="getting-website-data-into-r" class="section level2">
<h2>
<span class="header-section-number">3.1</span> Getting website data into R<a class="anchor" aria-label="anchor" href="#getting-website-data-into-r"><i class="fas fa-link"></i></a>
</h2>
<p>Our very own <code>scrapex</code> package has a function called<code><a href="https://rdrr.io/pkg/scrapex/man/history_elections_spain_ex.html">history_elections_spain_ex()</a></code> which points to a locally saved copy of the Wikipedia website that will persist over time(the original online link is <a href="https://en.wikipedia.org/wiki/Elections_in_Spain" class="uri">https://en.wikipedia.org/wiki/Elections_in_Spain</a>). Let’s load all packages and take a look at the website.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">scrapex</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rvest.tidyverse.org/">rvest</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://stringr.tidyverse.org">stringr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>

<span class="va">link</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scrapex/man/history_elections_spain_ex.html">history_elections_spain_ex</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">link</span></code></pre></div>
<pre><code>## [1] "/home/runner/.local/share/renv/cache/v5/R-4.2/x86_64-pc-linux-gnu/scrapex/0.0.1.9999/7469fad0e3ecef23f13ff2ee7baf3c66/scrapex/extdata/history_elections_spain//Elections_Spain.html"</code></pre>
<p>This is where your the website is saved locally on your computer. We can directly visualize this on our browser like this:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/browseURL.html">browseURL</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/scrapex/man/prep_browser.html">prep_browser</a></span><span class="op">(</span><span class="va">link</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="images/primer_webscraping/elections_website.png" width="100%" style="display: block; margin: auto;"></div>
<p>On the bottom right you can see the plot that we’d like to generate. This plots has all political parties since 1978 up until the 2020 elections. The first step in webscraping is to ‘read’ the website into R. We can do that with the <code>read_html</code> function. We pass the website link (the typical <a href="https://en.wikipedia.org" class="uri">https://en.wikipedia.org</a> string) but since we already have the website locally, we just pass it the path to the local website:</p>
<p>TODO: explain and set the user agent. Rewrite this paragraph to mix with the chapter.
Before we do that, I will set something called my <code>User-Agent</code>. In short, the <code>User-Agent</code> is <strong>who</strong> you are. It is good practice to identify the person who is scraping the website because if you’re causing any trouble on the website, the website can directly identify who is causing problems. You can figure out your user agent <a href="https://www.google.com/search?client=ubuntu&amp;channel=fs&amp;q=what%27s+my+user+agent&amp;ie=utf-8&amp;oe=utf-8">here</a> and paste it in the string below. In addition, I will add a time sleep of 5 seconds to the function because we want to make sure we don’t cause any troubles to the website we’re scraping due to an overload of requests.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">html_website</span> <span class="op">&lt;-</span> <span class="va">link</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="http://xml2.r-lib.org/reference/read_xml.html">read_html</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">html_website</span></code></pre></div>
<pre><code>## {html_document}
## &lt;html class="client-nojs" lang="en" dir="ltr"&gt;
## [1] &lt;head&gt;\n&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8 ...
## [2] &lt;body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject  ...</code></pre>
<p>We can’t understand much from the output from <code>read_html</code> because the HTML code behind the website is <strong>very long</strong>. <code>read_html</code> only shows the top level details. In any case, we don’t need to understand these details at first. Now that we have the website already in R we need to figure out where is the actual data on elections on the website. If you scroll down, near the end of the website you’ll see a <strong>table</strong> like this one:</p>
<div class="inline-figure"><img src="images/primer_webscraping/elections_table.png" width="100%" style="display: block; margin: auto;"></div>
<p>This is precisely the data we need. This contains the election results for all parties since 1978. The <code>rvest</code> package (which we have already loaded) has a very handy function called <code><a href="https://rvest.tidyverse.org/reference/html_table.html">html_table()</a></code> which automatically extracts all tables from a website into R. However, <code><a href="https://rvest.tidyverse.org/reference/html_table.html">html_table()</a></code> needs to know which website we’re working with so we need to pass it the <code>html_website</code> we read in the previous step:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">all_tables</span> <span class="op">&lt;-</span>
  <span class="va">html_website</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rvest.tidyverse.org/reference/html_table.html">html_table</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><code><a href="https://rvest.tidyverse.org/reference/html_table.html">html_table()</a></code> reads <strong>all</strong> tables so there’s a lot of information in <code>all_tables</code> (a list with 10 tables to be more precise). I won’t print the entire R object because it’s too verbose but I encourage the reader to write <code>all_tables</code> in the R console and explore all the tables that it scraped automatically. I did that myself to understand where is the information that we’re looking for. After carefully inspecting all tables, I figure out that the table we’re looking for is in slot 5:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">elections_data</span> <span class="op">&lt;-</span> <span class="va">all_tables</span><span class="op">[[</span><span class="fl">5</span><span class="op">]</span><span class="op">]</span>
<span class="va">elections_data</span></code></pre></div>
<pre><code>## # A tibble: 16 × 18
##    Election  `UCD[a]`     PSOE `PP[b]` `IU[c]` `CDC[d]`   PNV `ERC[e]` `BNG[f]`
##    &lt;chr&gt;     &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1 Election  ""           NA      NA   ""          NA    NA       NA       NA  
##  2 1977      "34.4"       29.3     8.3 "9.3"        2.8   1.7      0.8      0.1
##  3 1979      "34.8"       30.4     6.1 "10.8"       1.7   1.6      0.7      0.3
##  4 1982      "6.8"        48.1    26.4 "4.0"        3.7   1.9      0.7      0.2
##  5 1986      "Dissolved"  44.1    26   "4.6"        5     1.5      0.4      0.1
##  6 1989      "Dissolved"  39.6    25.8 "9.1"        5     1.2      0.4      0.2
##  7 1993      "Dissolved"  38.8    34.8 "9.6"        4.9   1.2      0.8      0.5
##  8 1996      "Dissolved"  37.6    38.8 "10.5"       4.6   1.3      0.7      0.9
##  9 2000      "Dissolved"  34.2    44.5 "5.4"        4.2   1.5      0.8      1.3
## 10 2004      "Dissolved"  42.6    37.7 "5.0"        3.2   1.6      2.5      0.8
## 11 2008      "Dissolved"  43.9    39.9 "3.8"        3     1.2      1.2      0.8
## 12 2011      "Dissolved"  28.8    44.6 "6.9"        4.2   1.3      1.1      0.8
## 13 2015      "Dissolved"  22      28.7 "3.7"        2.2   1.2      2.4      0.3
## 14 2016      "Dissolved"  22.6    33   "[k]"        2     1.2      2.6      0.2
## 15 Apr. 2019 "Dissolved"  28.7    16.7 "[l]"        1.9   1.5      3.9      0.4
## 16 Nov. 2019 "Dissolved"  28      20.8 "[l]"        2.2   1.6      3.6      0.5
## # … with 9 more variables: `EHB[g]` &lt;chr&gt;, `CDS[h]` &lt;chr&gt;, `CC[i]` &lt;dbl&gt;,
## #   UPyD &lt;chr&gt;, Cs &lt;chr&gt;, Com. &lt;chr&gt;, `Pod.[j]` &lt;dbl&gt;, Vox &lt;dbl&gt;, MP &lt;dbl&gt;</code></pre>
<p>You can see it’s the same table we saw on the website here:</p>
<div class="inline-figure"><img src="images/primer_webscraping/elections_table.png" width="100%" style="display: block; margin: auto;"></div>
</div>
<div id="data-cleaning" class="section level2">
<h2>
<span class="header-section-number">3.2</span> Data cleaning<a class="anchor" aria-label="anchor" href="#data-cleaning"><i class="fas fa-link"></i></a>
</h2>
<p>On the first column we have the year and on each column we have the name of the political party. However, the table has some problems that we need to fix. Let’s outline the things that we need to fix:</p>
<ul>
<li>The first row of the table is empty</li>
<li>The <code>Election</code> column is a <code>character</code> column because in row 15 and 16 it contains months <code>Apr.</code> and <code>Nov.</code>.</li>
<li>For each political party column there are values which are not numbers (these are usually values representing foot notes such as <code>[k]</code> and others such as <code>Dissolved</code> for parties which dissolved over the years). This forces some columns to be <code>character</code> columns where in fact we want all of them to be of class <code>numeric</code> to be able to visualize them in a plot.</li>
<li>Column names also have these <em>footnote</em> values in their names. We probably should remove them.</li>
</ul>
<p>As I recalled in the first paragraphs of this primer, to be able to do webscraping, you need to be a data ninja. You’ll need to become familiar with the basics of regular expressions (this is a fancy name for manipulating strings) and also on cleaning data. Here we’ll use the very basics of string manipulation, it’s fine if you feel completely lost. Just work hard at it and little by little you’ll learn tricks along the way.</p>
<p>The first thing we’d want to do is to keep only the columns which are character. Most of our problems are related to these columns:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">elections_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select_all.html">select_if</a></span><span class="op">(</span><span class="va">is.character</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 16 × 8
##    Election  `UCD[a]`    `IU[c]` `EHB[g]`    `CDS[h]`    UPyD        Cs    Com. 
##    &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;
##  1 Election  ""          ""      ""          ""          ""          ""    ""   
##  2 1977      "34.4"      "9.3"   "0.2"       ""          ""          ""    ""   
##  3 1979      "34.8"      "10.8"  "1.0"       ""          ""          ""    ""   
##  4 1982      "6.8"       "4.0"   "1.0"       "2.9"       ""          ""    ""   
##  5 1986      "Dissolved" "4.6"   "1.1"       "9.2"       ""          ""    ""   
##  6 1989      "Dissolved" "9.1"   "1.1"       "7.9"       ""          ""    ""   
##  7 1993      "Dissolved" "9.6"   "0.9"       "1.8"       ""          ""    ""   
##  8 1996      "Dissolved" "10.5"  "0.7"       "0.2"       ""          ""    ""   
##  9 2000      "Dissolved" "5.4"   "Boycotted" "0.1"       ""          ""    ""   
## 10 2004      "Dissolved" "5.0"   "Banned"    "0.1"       ""          ""    ""   
## 11 2008      "Dissolved" "3.8"   "Banned"    "0.0"       "1.2"       "0.2" ""   
## 12 2011      "Dissolved" "6.9"   "1.4"       "Dissolved" "4.7"       "Did… "0.5"
## 13 2015      "Dissolved" "3.7"   "0.9"       "Dissolved" "0.6"       "13.… "[k]"
## 14 2016      "Dissolved" "[k]"   "0.8"       "Dissolved" "0.2"       "13.… "[k]"
## 15 Apr. 2019 "Dissolved" "[l]"   "1.0"       "Dissolved" "Did not r… "15.… "0.7"
## 16 Nov. 2019 "Dissolved" "[l]"   "1.2"       "Dissolved" "[m]"       "6.8" "[n]"</code></pre>
<p>areWe can see all the different string values in those columns. What we’d want is to replace all non-numeric values for <code>NA</code>’s. That way when we convert these columns to numbers we won’t loose any information. How can we remove these values? I went through each of these columns and wrote down the <code>character</code> values that we need to remove:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">wrong_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  <span class="st">"Dissolved"</span>,
  <span class="st">"[k]"</span>,
  <span class="st">"[l]"</span>,
  <span class="st">"[m]"</span>,
  <span class="st">"n"</span>,
  <span class="st">"Banned"</span>,
  <span class="st">"Boycotted"</span>,
  <span class="st">"Did not run"</span>
<span class="op">)</span></code></pre></div>
<p>Now we just need to apply some regular expression (regex from now on) skills to remove them. Let’s explain what we want to do. In the regex world the <code>|</code> stands for OR. This means that if we want to find all the words <code>Banned</code> and <code>Boycotted</code> and replace them with <code>NA'</code> we could write <code>Banned|Boycotted</code>. This literally means <code>Banned</code> OR <code>Boycotted</code>. We can take the previous <code>wrong_labels</code> vector and insert a <code>|</code> between the wrong labels:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">wrong_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">wrong_labels</span>, collapse <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span>
<span class="va">wrong_labels</span></code></pre></div>
<pre><code>## [1] "Dissolved|[k]|[l]|[m]|n|Banned|Boycotted|Did not run"</code></pre>
<p>This effectively says: <code>Dissolved</code> OR <code>[k]</code> OR <code>[l]</code>, …</p>
<p>With this string we can use the function <code>str_replace_all</code> to replace all wrong labels for <code>NA</code>’s. Here’s how we’d do it:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">semi_cleaned_data</span> <span class="op">&lt;-</span>
  <span class="va">elections_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_if</a></span><span class="op">(</span>
    <span class="va">is.character</span>,
    <span class="op">~</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span>string <span class="op">=</span> <span class="va">.x</span>, pattern <span class="op">=</span> <span class="va">wrong_labels</span>, replacement <span class="op">=</span> <span class="cn">NA_character_</span><span class="op">)</span>
  <span class="op">)</span></code></pre></div>
<p>Alright, don’t get stressed, we’ll explain this line by line. The second line references our data (<code>elections_data</code>, the one we’ve been working with until now). The third line uses the <code>mutate_if</code> function which works by applying a function to columns that we subset based on a criteria. Let’s break down that explanation even further. You can actually read the code from above like this:</p>
<ul>
<li>For the <code>elections_data</code>
</li>
<li>For columns which are <code>character</code> columns (<code>mutate_if(is character, ...)</code>)</li>
<li>Apply a transformation (<code>mutate_if(is character, ~ str_replace_all(...)</code>)</li>
</ul>
<p>For our example this means that for all character columns, the function <code>str_replace_all</code> function will be applied. This function replaces all <code>wrong_labels</code> for <code>NA</code>’s. We can see this right away:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">semi_cleaned_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select_all.html">select_if</a></span><span class="op">(</span><span class="va">is.character</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 16 × 8
##    Election  `UCD[a]` `IU[c]` `EHB[g]` `CDS[h]` UPyD  Cs     Com. 
##    &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;
##  1 &lt;NA&gt;      ""       ""      ""       ""       ""    ""     ""   
##  2 1977      "34.4"   "9.3"   "0.2"    ""       ""    ""     ""   
##  3 1979      "34.8"   "10.8"  "1.0"    ""       ""    ""     ""   
##  4 1982      "6.8"    "4.0"   "1.0"    "2.9"    ""    ""     ""   
##  5 1986       &lt;NA&gt;    "4.6"   "1.1"    "9.2"    ""    ""     ""   
##  6 1989       &lt;NA&gt;    "9.1"   "1.1"    "7.9"    ""    ""     ""   
##  7 1993       &lt;NA&gt;    "9.6"   "0.9"    "1.8"    ""    ""     ""   
##  8 1996       &lt;NA&gt;    "10.5"  "0.7"    "0.2"    ""    ""     ""   
##  9 2000       &lt;NA&gt;    "5.4"    &lt;NA&gt;    "0.1"    ""    ""     ""   
## 10 2004       &lt;NA&gt;    "5.0"    &lt;NA&gt;    "0.1"    ""    ""     ""   
## 11 2008       &lt;NA&gt;    "3.8"    &lt;NA&gt;    "0.0"    "1.2" "0.2"  ""   
## 12 2011       &lt;NA&gt;    "6.9"   "1.4"     &lt;NA&gt;    "4.7"  &lt;NA&gt;  "0.5"
## 13 2015       &lt;NA&gt;    "3.7"   "0.9"     &lt;NA&gt;    "0.6" "13.9"  &lt;NA&gt;
## 14 2016       &lt;NA&gt;     &lt;NA&gt;   "0.8"     &lt;NA&gt;    "0.2" "13.1"  &lt;NA&gt;
## 15 Apr. 2019  &lt;NA&gt;     &lt;NA&gt;   "1.0"     &lt;NA&gt;     &lt;NA&gt; "15.9" "0.7"
## 16 Nov. 2019  &lt;NA&gt;     &lt;NA&gt;   "1.2"     &lt;NA&gt;     &lt;NA&gt; "6.8"   &lt;NA&gt;</code></pre>
<p>All columns <strong>still</strong> are characters, but don’t have any of the wrong labels that we identified before. The only problem we have is that the <code>Election</code> column has the months <code>Apr.</code> and <code>Nov.</code> and we won’t be able to convert that to numeric. We can apply our regex trick of saying replace Apr. OR Nov. by an empty string. Let’s do that:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">semi_cleaned_data</span> <span class="op">&lt;-</span>
  <span class="va">semi_cleaned_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    Election <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span>string <span class="op">=</span> <span class="va">Election</span>, pattern <span class="op">=</span> <span class="st">"Apr. |Nov. "</span>, replacement <span class="op">=</span> <span class="st">""</span><span class="op">)</span>
  <span class="op">)</span></code></pre></div>
<p>Let’s check again that everything worked as expected:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">semi_cleaned_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select_all.html">select_if</a></span><span class="op">(</span><span class="va">is.character</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 16 × 8
##    Election `UCD[a]` `IU[c]` `EHB[g]` `CDS[h]` UPyD  Cs     Com. 
##    &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;
##  1 &lt;NA&gt;     ""       ""      ""       ""       ""    ""     ""   
##  2 1977     "34.4"   "9.3"   "0.2"    ""       ""    ""     ""   
##  3 1979     "34.8"   "10.8"  "1.0"    ""       ""    ""     ""   
##  4 1982     "6.8"    "4.0"   "1.0"    "2.9"    ""    ""     ""   
##  5 1986      &lt;NA&gt;    "4.6"   "1.1"    "9.2"    ""    ""     ""   
##  6 1989      &lt;NA&gt;    "9.1"   "1.1"    "7.9"    ""    ""     ""   
##  7 1993      &lt;NA&gt;    "9.6"   "0.9"    "1.8"    ""    ""     ""   
##  8 1996      &lt;NA&gt;    "10.5"  "0.7"    "0.2"    ""    ""     ""   
##  9 2000      &lt;NA&gt;    "5.4"    &lt;NA&gt;    "0.1"    ""    ""     ""   
## 10 2004      &lt;NA&gt;    "5.0"    &lt;NA&gt;    "0.1"    ""    ""     ""   
## 11 2008      &lt;NA&gt;    "3.8"    &lt;NA&gt;    "0.0"    "1.2" "0.2"  ""   
## 12 2011      &lt;NA&gt;    "6.9"   "1.4"     &lt;NA&gt;    "4.7"  &lt;NA&gt;  "0.5"
## 13 2015      &lt;NA&gt;    "3.7"   "0.9"     &lt;NA&gt;    "0.6" "13.9"  &lt;NA&gt;
## 14 2016      &lt;NA&gt;     &lt;NA&gt;   "0.8"     &lt;NA&gt;    "0.2" "13.1"  &lt;NA&gt;
## 15 2019      &lt;NA&gt;     &lt;NA&gt;   "1.0"     &lt;NA&gt;     &lt;NA&gt; "15.9" "0.7"
## 16 2019      &lt;NA&gt;     &lt;NA&gt;   "1.2"     &lt;NA&gt;     &lt;NA&gt; "6.8"   &lt;NA&gt;</code></pre>
<p>There we go, we don’t have strings in any of the the columns anymore. Let’s transform all columns into numeric and remove that first row that is empty:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">semi_cleaned_data</span> <span class="op">&lt;-</span>
  <span class="va">semi_cleaned_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_all</a></span><span class="op">(</span><span class="va">as.numeric</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Election</span><span class="op">)</span><span class="op">)</span>

<span class="va">semi_cleaned_data</span></code></pre></div>
<pre><code>## # A tibble: 15 × 18
##    Election `UCD[a]`  PSOE `PP[b]` `IU[c]` `CDC[d]`   PNV `ERC[e]` `BNG[f]`
##       &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1     1977     34.4  29.3     8.3     9.3      2.8   1.7      0.8      0.1
##  2     1979     34.8  30.4     6.1    10.8      1.7   1.6      0.7      0.3
##  3     1982      6.8  48.1    26.4     4        3.7   1.9      0.7      0.2
##  4     1986     NA    44.1    26       4.6      5     1.5      0.4      0.1
##  5     1989     NA    39.6    25.8     9.1      5     1.2      0.4      0.2
##  6     1993     NA    38.8    34.8     9.6      4.9   1.2      0.8      0.5
##  7     1996     NA    37.6    38.8    10.5      4.6   1.3      0.7      0.9
##  8     2000     NA    34.2    44.5     5.4      4.2   1.5      0.8      1.3
##  9     2004     NA    42.6    37.7     5        3.2   1.6      2.5      0.8
## 10     2008     NA    43.9    39.9     3.8      3     1.2      1.2      0.8
## 11     2011     NA    28.8    44.6     6.9      4.2   1.3      1.1      0.8
## 12     2015     NA    22      28.7     3.7      2.2   1.2      2.4      0.3
## 13     2016     NA    22.6    33      NA        2     1.2      2.6      0.2
## 14     2019     NA    28.7    16.7    NA        1.9   1.5      3.9      0.4
## 15     2019     NA    28      20.8    NA        2.2   1.6      3.6      0.5
## # … with 9 more variables: `EHB[g]` &lt;dbl&gt;, `CDS[h]` &lt;dbl&gt;, `CC[i]` &lt;dbl&gt;,
## #   UPyD &lt;dbl&gt;, Cs &lt;dbl&gt;, Com. &lt;dbl&gt;, `Pod.[j]` &lt;dbl&gt;, Vox &lt;dbl&gt;, MP &lt;dbl&gt;</code></pre>
<p>There we go, all columns are of class numeric and look nice and tidy for plotting. Last step we need to take is to remove the footnote values from the party column names. For doing that we’ll need some more advanced regex patterns that I’ll explain briefly (we have a # TODO separate chapter for this). The pattern we’ll use is <code>[.+]</code> which means: detect any character (this is the <code>.</code>) that is repeated one or more times (this is the <code>+</code>) and are enclosed within brackets (this is the <code>[]</code> part). So for example, the string <code>Election</code> won’t find any match because it does not have a bracket with any values repeated one or more times. However, the column name <code>UCD[a]</code> does have this pattern: it contains two brackets <code>[]</code> that have a value that is repeated one time (<code>a</code>).</p>
<p>There’s also a last trick that we need to take into account which is that brackets (<code>[]</code>) have a special meaning in the regex world. To signal to regex that you want to match brackets <em>literally</em>, you need to append them with the backslash (<code>\\</code>). So the final regex pattern we want to match is: <code>\\[.+\\]</code>. Let’s use it to rename all columns:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">semi_cleaned_data</span> <span class="op">&lt;-</span>
  <span class="va">semi_cleaned_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select_all.html">rename_all</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">.x</span>, <span class="st">"\\[.+\\]"</span>, <span class="st">""</span><span class="op">)</span><span class="op">)</span>

<span class="va">semi_cleaned_data</span></code></pre></div>
<pre><code>## # A tibble: 15 × 18
##    Election   UCD  PSOE    PP    IU   CDC   PNV   ERC   BNG   EHB   CDS    CC
##       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1     1977  34.4  29.3   8.3   9.3   2.8   1.7   0.8   0.1   0.2  NA    NA  
##  2     1979  34.8  30.4   6.1  10.8   1.7   1.6   0.7   0.3   1    NA    NA  
##  3     1982   6.8  48.1  26.4   4     3.7   1.9   0.7   0.2   1     2.9  NA  
##  4     1986  NA    44.1  26     4.6   5     1.5   0.4   0.1   1.1   9.2   0.3
##  5     1989  NA    39.6  25.8   9.1   5     1.2   0.4   0.2   1.1   7.9   0.3
##  6     1993  NA    38.8  34.8   9.6   4.9   1.2   0.8   0.5   0.9   1.8   0.9
##  7     1996  NA    37.6  38.8  10.5   4.6   1.3   0.7   0.9   0.7   0.2   0.9
##  8     2000  NA    34.2  44.5   5.4   4.2   1.5   0.8   1.3  NA     0.1   1.1
##  9     2004  NA    42.6  37.7   5     3.2   1.6   2.5   0.8  NA     0.1   0.9
## 10     2008  NA    43.9  39.9   3.8   3     1.2   1.2   0.8  NA     0     0.7
## 11     2011  NA    28.8  44.6   6.9   4.2   1.3   1.1   0.8   1.4  NA     0.6
## 12     2015  NA    22    28.7   3.7   2.2   1.2   2.4   0.3   0.9  NA     0.3
## 13     2016  NA    22.6  33    NA     2     1.2   2.6   0.2   0.8  NA     0.3
## 14     2019  NA    28.7  16.7  NA     1.9   1.5   3.9   0.4   1    NA     0.5
## 15     2019  NA    28    20.8  NA     2.2   1.6   3.6   0.5   1.2  NA     0.5
## # … with 6 more variables: UPyD &lt;dbl&gt;, Cs &lt;dbl&gt;, Com. &lt;dbl&gt;, Pod. &lt;dbl&gt;,
## #   Vox &lt;dbl&gt;, MP &lt;dbl&gt;</code></pre>
<p>The data set is ready to plot. It’s tidy and clean. Let’s plot it:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Pivot from wide to long to plot it in ggplot</span>
<span class="va">cleaned_data</span> <span class="op">&lt;-</span>
  <span class="va">semi_cleaned_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span><span class="op">-</span><span class="va">Election</span>, names_to <span class="op">=</span> <span class="st">"parties"</span><span class="op">)</span>

<span class="co"># Plot it</span>
<span class="va">cleaned_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">Election</span>, <span class="va">value</span>, color <span class="op">=</span> <span class="va">parties</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"%"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_color_viridis_d</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="images/primer_webscraping/automatic_rmarkdown/unnamed-chunk-19-1.png" width="672" style="display: block; margin: auto;"></div>
<p>So there you have it. This primer gave you a very direct experience on what webscraping involves. It involves read data from a website into R, manually or automatically finding the chunks of data you want to scrape, extracting those and cleaning them enough to be able to do something useful with it. In the next chapter you’ll see more in depth how to work with HTML and XML data, as you’ll need some intuition on how to find stuff within an HTML or XML document.</p>
</div>
<div id="exercises" class="section level2">
<h2>
<span class="header-section-number">3.3</span> Exercises<a class="anchor" aria-label="anchor" href="#exercises"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>Europe has an ageing problem and the mandatory retirement age is being constantly revised. In the <code>scrapex</code> package there’s a copy of the “Retirement in Europe” wikipedia website <a href="https://en.wikipedia.org/wiki/Retirement_in_Europe">https://en.wikipedia.org/wiki/Retirement_in_Europe</a>. You can find the local link in the function <code><a href="https://rdrr.io/pkg/scrapex/man/retirement_age_europe_ex.html">retirement_age_europe_ex()</a></code>. Can you inspect the website, parse the table and replicate the plot below? (Hint, you might the function <code>str_sub</code> from <code>stringr</code>).</li>
</ol>
<div class="inline-figure"><img src="images/primer_webscraping/automatic_rmarkdown/unnamed-chunk-20-1.png" width="672" style="display: block; margin: auto;"></div>
<ol start="2" style="list-style-type: decimal">
<li><p>When parsing the elections table, we parsed all tables of the Wikipedia table into <code>all_tables</code>. Among all those tables, there’s one table that documents the years at which there were general elections, presidential elections, european elections, local elections, regional elections and referendums in Spain. Can you extract into a <em>numeric</em> vector all the years at which there were general elections in Spain? (Hint: you might need <code>str_split</code> and other <code>stringr</code> functions and the resulting vector should start by 1810 and end with 2019).</p></li>
<li><p>Building on your previous code, can you tell me the years where local elections, european elections and general elections overlapped?</p></li>
</ol>
<!-- # TODO: This is too hard for an exercise right away. You thought of saving cleaned_data to scrapex --><!-- # and raise this exercises later on such that students can recycle the data frame elsewhere and --><!-- # just focus on scraping the colors. This should be once students know xpath. --><!-- html_website %>% --><!--   html_nodes(xpath = "//table[@style='text-align:center; font-size:90%;']") %>% --><!--   html_nodes(xpath = "//th") --><!-- # TODO: can you come up with a direct xpath to background colors? That --><!-- # way it's less verbose --><!-- all_style_attr <- --><!--   html_website %>% --><!--   html_nodes(xpath = "//table[@style='text-align:center; font-size:90%;']") %>% --><!--   html_nodes(xpath = "//tbody//th[@style]") %>% --><!--   html_attr("style") --><!-- where_background <- all_style_attr %>% str_detect("background") --><!-- party_colors <- all_style_attr[where_background] %>% str_replace_all("background:", "") --><!-- parties <- names(semi_cleaned_data)[-1] --><!-- colors_lookup <- tibble(parties = parties, party_colors = party_colors) --><!-- cleaned_colors_data <- --><!--   cleaned_data %>% --><!--   left_join(colors_lookup) --><!-- tmp_colors <- cleaned_colors_data %>% distinct(parties, party_colors) --><!-- vector_colors <- tmp_colors$party_colors --><!-- names(vector_colors) <- tmp_colors$parties --><!-- cleaned_colors_data %>% --><!--   ggplot(aes(Election, value, color = parties)) + --><!--   geom_line() + --><!--   scale_y_continuous(name = "% of votes", labels = function(x) paste0(x, "%")) + --><!--   xlab("Election years") + --><!--   scale_colour_manual(values = vector_colors) + --><!--   ggtitle(label = "Parties and share of votes in all Spanish Elections") + --><!--   theme_minimal() --><!-- ``` --><!-- - Here a quick example using rvest to scrape IMDB (? better example ?). You need to add the Wikipedia page to `scrapex`. -->
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="introduction-to-webscraping.html"><span class="header-section-number">2</span> Introduction to Webscraping</a></div>
<div class="next"><a href="data-formats-for-webscraping.html"><span class="header-section-number">4</span> Data Formats for Webscraping</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#a-primer-on-webscraping"><span class="header-section-number">3</span> A primer on Webscraping</a></li>
<li><a class="nav-link" href="#getting-website-data-into-r"><span class="header-section-number">3.1</span> Getting website data into R</a></li>
<li><a class="nav-link" href="#data-cleaning"><span class="header-section-number">3.2</span> Data cleaning</a></li>
<li><a class="nav-link" href="#exercises"><span class="header-section-number">3.3</span> Exercises</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/cimentadaj/dataharvesting/tree/main/book/blob/main/02-primer_webscraping.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/cimentadaj/dataharvesting/tree/main/book/edit/main/02-primer_webscraping.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Data Harvesting with R</strong>" was written by Jorge Cimentada. It was last built on 2022-10-08.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
